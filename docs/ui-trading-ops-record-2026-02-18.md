# UI/운영 후속 작업 기록 (2026-02-18)

## 1) UI 구조 개편
- 대시보드를 사이드바 카테고리 기반으로 재구성
  - `자동매매`
  - `포트폴리오`
  - `백테스트`
  - `프리미엄차트`
- 초기 스크롤 이동 방식에서 탭 전환 방식으로 변경
  - 선택한 카테고리 화면만 렌더링

## 2) 섹션 정리/삭제
- 제거 완료
  - AI 전략 분석가
  - 봇 활동 로그(기존 섹션)
  - 델타 중립 구조 설명 섹션
  - 봇 파라미터 설정 섹션
  - 자동매매 탭의 주요 리스크 요인 카드
- 자동매매 탭에서 핵심 시세 카드(김프/실질김프/국내/해외/환율) 숨김

## 3) 멀티코인/차트
- 멀티코인 김치 프리미엄은 BTC만 표시하도록 제한
- `프리미엄차트` 탭에서 `PremiumChart` 컴포넌트 재배치/노출

## 4) 자동매매 UX 보완
- `자동매매 시작/정지` 버튼을 헤더에서 제거하고 `자동매매 실행 설정` 카드 내부로 이동
- `진입(판매) 김프 %`, `청산(구매) 김프 %` 입력 필드 복구
- 자동매매 탭에서도 `실제 체결 내역`, `실행 이벤트 로그` 확인 가능하도록 유지

## 5) 포트폴리오 기능 추가
- 백엔드 API 추가
  - `GET /api/execution/binance/portfolio`
  - 잔고 목록, 활성 포지션, 요약(가용/사용/총잔고/미실현손익) 제공
- 프론트 연동
  - 포트폴리오 상태 polling 포함
  - 요약 카드 + 상세 테이블(자산별 잔고, 활성 포지션) 표시

## 6) 체결 로그 고도화 (요청 반영)
- 체결 로그 컬럼 확장
  - 구분(진입/청산)
  - 김프%
  - 실질김프%
  - USDT/KRW
  - 수량/가격/PNL
- 주문 시점 전략 컨텍스트(`strategyContext`)를 주문 API에 전달
- 서버에서 주문 성공 이벤트에 컨텍스트 기록 후, fills 응답에 주입
  - 과거 체결에는 컨텍스트가 없어 `-`로 표시될 수 있음

## 7) 안정성/운영 이슈 수정
- `localhost:3000` 연결 불가 이슈 대응
  - 프론트 서버 바인딩 재조정 및 재기동 확인
- 앱 크래시 수정
  - `currentData` null 상태에서 포트폴리오 환산 계산 접근 오류 수정

## 8) 검증
- `npm run build` 반복 검증: 통과
- `node --check server.js`: 통과
- dry-run 주문 응답에서 `strategyContext` 포함 확인

## 9) 주요 변경 파일
- `App.tsx`
- `server.js`
- `services/marketService.ts`
- `types.ts`
